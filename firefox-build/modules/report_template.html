<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DRAGON Bug Report</title>
    <link rel="icon" type="image/png"
        href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAAAXNSR0IB2cksfwAAAAlwSFlzAAALEwAACxMBAJqcGAAAC3tJREFUeJzVmQmQVMUZgP+/+83Mzl7sOTPLYgTFAFFxdWU5IqUYo4mWxihGYrQiYCqJKB6BqCURKwYlCBIvSLxCWZTxIAbL8oRQBFNqYMGKtxCIB7CzMzsL6rLHzHv953/nvJk9WNbZpNLF7Lv6df9f/2c/EArU4hMjR8feTnxSqPEG27AQg7ScUldFUq2XBl0c3ZFIFmLMwbaCAMQnVI81KgI7UVfXjtyWeLAQYw62DQjQumIuiGde+B5ooRdr//5Jpr9+iYmx8kyYDiBCC0NMq2tOflp4UftuAwP8djbgX166SyGUsmBLotsS8b76HTz/BDyUSO4EgWNRqQ2o0/frticPDY/Iue2wJpQ4JVqlh/BjINgpdXVJtDnx77767W+K3EMSbzCHREM9gopuYE10FF7k3DYoH2iZFL1GabiCTzPCoFvRoEdj2xM5wsVPqT3WCIiNhDAa2JbAUJvZqeeyJvYMi+ROGxRAoiES1oP4oBI4m2XLgKINQtGdsij0RuS1z5QFsOB0MDZ/sAACuAwsAuJ/9C8waIFU8Epse7L7fwZgttbGSKUu8QU2k6nWDWJtKLVWKFgaa07sNG+1nFxTogLiZZB4mu9VnTX2Epvf/OiOto8LKj0cYRhNTKwuzRRp60ngmeS8y38ybO+b2HkfY6ANQIhGSL7OShhnacFtRGnut1ro6r7YjlTBzOqI80BLY22d0sRShfgjflt6A5gCAuxCopdRQTv7zHwePuo89Hrxc+4Dy6VOayPbk13/dQCzJU+NBnWgeey0S/kymD+i6cIsq85nIe8+Uc6MwtSaoebHtrW9NyTJs9MNvbVMqm0gIW5n577AjJ6uTVmNwIWxL8m9mbU9/tfB0Wq5JLgr8o9kelgB2meM0TIHO2qgSEZYmioUWMxCdRGRTorOURLncCKL5Y+JDo0nP2YBnIPBZrWG/Wdx5I22fQUHaJtaX6kr43KO75ey3Y9nKSp4raXPrs0w2sFCdLFH1FjPiPJGoRwLIvBpwTUpoG2i2zi3dluqrSAAiVNjJxkSruegMosEFA38FuUIk/PcXXqCLLOvn8+cwHRw0WNMrt2aOjBkgNbJ9UECdYUScAfPV5dv0zlv+M4RqfdorpmQowFFh3icL9jUogwrvD4+X0HdWCjG1C2vXfvO0ACSDbExStBcnvJ9BOrgmB/j33ROYGeRbeM5K+hImB0oRyB/HrD+dIqMupEN5gOQsICLxLOZPORqzjpwctTGj7mi+qGtQwPIb+1NkUBG4CJD4Dw2p2pXOHInxdzw6NcEehrLAelgh70pWFGyOpPsHKcCeBeb6IXoUHDVe3Xkb8nVg5L+cADxpliMJKzglZ9Fpp/lqRtcYa172fMc4R3tkHvPbmkuL/7E2fsVDgHtpIllPMdEm5We5hyxsGZTm7enaD8vJlBAqPL5eK/E1y8A1z4xIyieBCFOJ6ScNzBfeJGrBc+k0K+F7LteFLLqPe6L6NMUmouxh0uO+YEJo18sv387pb5dPQrL5O9EhuZWPJ/8/LAAyaZoma6JLWyjDZjfC3sLL0sIRFiBfkBk+4ms8FmzQvtdH0CfDckNbG8yzDN8UqSCYgkPuUobFZs34r6sg/cCaGuqC+kCVnF2nePN4ndad3WFfS5KCYonZKDz3YBdPJj9hS2oBeADyZ8te0kDwABZP8GjSoxLUg0V61Kt/QK0Tq671JD4hDV1joP6Vt0RDLgGKDkxDaoHoXuPtJRv9kPhAoJ9nm9KfUjrmZSvC6LvRIL144Q3q/LJ1FN9AiQm1dXpGv6V707I1bHPQT0AguAoA4qOs1dfdThRxL/q0jUfBCfqW9fmqOyoGxn1MyBVxXcbedx6Tx5yPYXPlFrPf1+goLiHN0vlAukPlWvbftYnQHzKyAVc0yzlxPM5/57mqaZydDip9+pbMQmKT8hAoNqAQ28HLC2gbe+H+LiBn+/mczNdfZ1/x7MBHA2+5MWCvMeW8YBE8YR+yBjBofQkfvkChr6AO0TIjQOCI5aAzfysmjRs5PeeqljTNqtPgJZp9Ts4LBzkhZuDXRnUw9prPHB9XwCmaZRM6QEZJlsD3dbjdg3ofDm65vXyez+yxuxc3giZrXvKQMNpvDiLGanJ0Y3pJ5wzqVkYcAUeU7Gz7I498MWsqigHj5/yvAt4ljJbkxaxNScv7KoRj7XN6wXQenwsCCVikSC1tHZbvJNzwBzelDxsr5o/6rgaICiblgYRIujZJ0FvZS8D9Wj1s+1X5du327qWnADpD/edTAG8kZPiD20Qa9huXrh1wlB3B0495u3wtTvgy8srq9gXl7DwP+ZVC1uBgR2AgWeWP9T2bC+AfU1HodbZGYi+m0rb5lS3Qkm40e6VdWYPgB24dFIaJEch1YXQ9aHG0qjVVevar+4PwG1fzq4OKql+wBC/YOEarJtWCqAkT7GZYT5CDTMiTWsV4Jm8z17J/UpZG3GeuqFsdbL/KOS2lql1f2Y1XuQ5ck5UsTUQZh8IRpV1v2ePxo5M/wwqmlz21IGew0GYreOqygrSYImS4ueWQfkKRp4nJYSsx26RViIzi7exT/DU94qRo64vufktb4wBAEZuUkgzcuoZkfUBUwOBqAHF39Ct+8SbyPReqbCLlhSdf/JtRTM3DYbBBrmu+gEyay3lCC+hk2kuK70n9Zz5vHPlNDA+3XUTT/Ro2crWnP1C/wDfrN/CxjHd7pVnQua16YYBBcUTdQhU2logA0E/iD3QBbNBiXXlq1L9fk81W9cvKwOE4juK8GFefesDAC/Qfo5Od7JB/j60LGF4kLePE6W3f6Tyx+gXYP/UupfZcc7Jz8TomI8FonEZUaagpDFjrho4jsYlsUijTivBkLcVLWrrd6/bfVPlFI5MdxKJGr5M8YtbOBSshqrKeHjhroHYDw/AJvRH9oErPR/w1zXCOTIAsinJEWRpQpjfIMxnws6cfNzNprAIFD4XmN/+lT+hHBEAJ7VfcRT6Ne+iWG1kfnke71We7lGStfJoaoLNqGisAq2CPE04IN183MLXq1DRq9pPCgvSfzk9ue67HIef5VT+GcfexYaGa3jZg1aR5mrABTCPpjZYA6FjFQSPIq8GMpOQA2JWd2+yjS+mEZUbAxfu6q98KwxAalKsJB0Qm3njsVsEtMsMPf0Ibzxm5wLYmkDHlEAztcGHGoKicWaZDU74RQfEAlIM9Brnx4UqVNWsXfT+VwLpF+DzWy6Ezs1bb2GAWGxry3WtTZFxHIs3sQAj3dW3zSQPwNIGPyoHCB/PEOU2AErHwbPmFefzuxHlA+Li/UP6qDUggNmSk0dGyFDnRprja9pnT4HMO7vPVGH5Kq+kBCcjWwJLRxvOuQlgwQS5XuLKR5aCVxJb5oQuCBp8/STvI66Ul8T1ggP01VqnRX/DVeHNLAwXkipHcPccHMe2NFGMEOZ9nRxhC42e8K6TC9OsHuera8R5+74cdoBUU22VHhLruQSYbsf+3lrwTEnaPiGrufRu5P2Rhp5PoJszTABNcAyGW41AZFlgxluHkeArApgtcVpkJgXxGXABhM90HMGzEQossNB4hNAxwtlugq0Nyy9MAAsowegN4qy9LcMO0Da1tt4oFu+xYCPQAfAE13wAArImFkIo+5Zma8e2f/sn0Qu1nDjvF2fsnT/sAAdOj9Wmg/QuCxjxa8C1ffBWnrzy27wOT9EgUCu8sOoCuJogiXuhKHq0mLS1V81TUIDUjMiJRlA0c04I9m9CvQFCEzQIHSezq58DYEGY2/qxeNong/4vqCMGOHDuqKCh9McV4qXml3V7y0dcVPJm0TYfckwJUfggGC4wWkJ4ombbvU/oLACbkaGfLaZ/unH4AGYeq1FndyPLXkzEGFZm5mLYArCFt83J9QGynBQCBNrXJIRMAI486LP/rEYsgrfE9I+H/nn9/639B1LfgG1sRoWvAAAAAElFTkSuQmCC">
    <style>
        :root {
            --primary: #6366f1;
            --bg: #f8fafc;
            --surface: #ffffff;
            --border: #e2e8f0;
            --text: #0f172a;
            --text-secondary: #64748b;
            --danger: #ef4444;
            --warning: #f59e0b;
            --success: #22c55e;
            --font-mono: 'SFMono-Regular', Consolas, 'Liberation Mono', Menlo, monospace;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            background: var(--bg);
            color: var(--text);
            margin: 0;
            height: 100vh;
            display: flex;
            overflow: hidden;
        }

        /* Layout */
        .container {
            display: flex;
            width: 100%;
            height: 100%;
        }

        .video-section {
            flex: 1;
            background: #000;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            min-width: 200px;
            /* transition removed to fix resizing lag */
        }

        .video-section.animating {
            /* transition: all 0.3s ease-out; */
        }

        .container.collapsed .video-section {
            flex: 1 !important;
            max-width: 100% !important;
        }

        .container.collapsed .logs-section,
        .container.collapsed .resizer {
            display: none;
        }

        .toggle-btn {
            position: absolute;
            top: 20px;
            right: 20px;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(8px);
            -webkit-backdrop-filter: blur(8px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            color: white;
            border-radius: 8px;
            width: 36px;
            height: 36px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            z-index: 20;
            transition: all 0.3s ease-out;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        .toggle-btn:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: translateY(-1px);
            box-shadow: 0 6px 8px rgba(0, 0, 0, 0.2);
        }

        .toggle-btn:active {
            transform: translateY(0);
        }

        .resizer {
            width: 4px;
            background: var(--border);
            cursor: col-resize;
            transition: background 0.2s;
            z-index: 10;
        }

        .resizer:hover,
        .resizer.resizing {
            background: var(--primary);
        }

        .logs-section {
            width: 500px;
            background: var(--surface);
            display: flex;
            flex-direction: column;
            min-width: 300px;
        }

        /* Video Player */
        video {
            max-width: 100%;
            max-height: 100%;
            outline: none;
        }

        /* Tabs */
        .tabs {
            display: flex;
            border-bottom: 1px solid var(--border);
            background: var(--surface);
        }

        .tab-btn {
            padding: 12px 16px;
            background: none;
            border: none;
            border-bottom: 2px solid transparent;
            color: var(--text-secondary);
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s;
        }

        .tab-btn:hover {
            color: var(--text);
            background: #f1f5f9;
        }

        .tab-btn.active {
            color: var(--primary);
            border-bottom-color: var(--primary);
        }

        /* Content Area */
        .tab-content {
            flex: 1;
            overflow-y: auto;
            padding: 0;
            display: none;
            position: relative;
        }

        .tab-content.active {
            display: block;
        }

        /* Logs Styling */
        .log-entry {
            padding: 8px 12px;
            border-bottom: 1px solid var(--border);
            font-family: var(--font-mono);
            font-size: 12px;
            display: flex;
            gap: 8px;
        }

        .log-entry:hover {
            background: #f8fafc;
        }

        .log-time {
            color: var(--text-secondary);
            min-width: 60px;
        }

        .log-type {
            font-weight: bold;
            min-width: 50px;
            text-transform: uppercase;
        }

        .log-type.error {
            color: var(--danger);
        }

        .log-type.warn {
            color: var(--warning);
        }

        .log-type.info {
            color: var(--primary);
        }

        .log-type.log {
            color: var(--text-secondary);
        }

        .log-message {
            word-break: break-all;
            white-space: pre-wrap;
        }

        /* Network Tab Styling */
        .network-toolbar {
            padding: 8px;
            border-bottom: 1px solid var(--border);
            display: flex;
            gap: 8px;
            align-items: center;
            flex-wrap: wrap;
            background: #f8fafc;
        }

        .filter-group {
            display: flex;
            gap: 4px;
            align-items: center;
        }

        .filter-btn {
            padding: 4px 8px;
            border: 1px solid transparent;
            border-radius: 4px;
            background: none;
            font-size: 11px;
            cursor: pointer;
            color: var(--text-secondary);
        }

        .filter-btn:hover {
            background: #e2e8f0;
            color: var(--text);
        }

        .filter-btn.active {
            background: var(--text-secondary);
            color: white;
        }

        .search-input {
            padding: 4px 8px;
            border: 1px solid var(--border);
            border-radius: 4px;
            font-size: 12px;
            flex: 1;
            min-width: 150px;
        }

        .network-table {
            width: 100%;
            border-collapse: collapse;
            font-size: 11px;
            table-layout: fixed;
        }

        .network-table th {
            text-align: left;
            padding: 8px;
            background: #f1f5f9;
            border-bottom: 1px solid var(--border);
            font-weight: 600;
            color: var(--text-secondary);
            position: sticky;
            top: 0;
            z-index: 1;
        }

        .network-table td {
            padding: 6px 8px;
            border-bottom: 1px solid var(--border);
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .network-table tr:hover {
            background: #f8fafc;
        }

        .status-badge {
            padding: 2px 6px;
            border-radius: 10px;
            font-size: 10px;
            font-weight: bold;
        }

        .status-2xx {
            background: #dcfce7;
            color: #166534;
        }

        .status-3xx {
            background: #dbeafe;
            color: #1e40af;
        }

        .status-4xx {
            background: #fee2e2;
            color: #991b1b;
        }

        .status-5xx {
            background: #fef3c7;
            color: #92400e;
        }

        .method-badge {
            font-weight: bold;
            font-size: 10px;
        }

        .view-btn {
            padding: 2px 8px;
            border: 1px solid var(--border);
            border-radius: 4px;
            background: white;
            cursor: pointer;
            font-size: 10px;
        }

        .view-btn:hover {
            background: #f1f5f9;
            border-color: var(--text-secondary);
        }

        /* Modal */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            z-index: 100;
        }

        .modal-content {
            background: var(--surface);
            width: 80%;
            max-width: 800px;
            height: 80%;
            margin: 5% auto;
            border-radius: 8px;
            display: flex;
            flex-direction: column;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
        }

        .modal-header {
            padding: 16px;
            border-bottom: 1px solid var(--border);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .modal-body {
            padding: 16px;
            overflow-y: auto;
            flex: 1;
        }

        .close-modal {
            background: none;
            border: none;
            font-size: 24px;
            cursor: pointer;
            color: var(--text-secondary);
        }

        .detail-section {
            margin-bottom: 20px;
        }

        .detail-section h4 {
            margin: 0 0 8px 0;
            color: var(--text-secondary);
            font-size: 12px;
            text-transform: uppercase;
        }

        .detail-pre {
            background: #f8fafc;
            padding: 12px;
            border-radius: 4px;
            overflow-x: auto;
            font-family: var(--font-mono);
            font-size: 12px;
            margin: 0;
            border: 1px solid var(--border);
        }

        /* Info Tab */
        .info-grid {
            padding: 20px;
            display: grid;
            grid-template-columns: 120px 1fr;
            gap: 12px;
            font-size: 14px;
        }

        .info-label {
            color: var(--text-secondary);
            font-weight: 500;
        }

        .info-value {
            font-family: var(--font-mono);
            word-break: break-all;
        }

        /* Actions Tab */
        .action-entry {
            padding: 12px;
            border-bottom: 1px solid var(--border);
            display: flex;
            gap: 12px;
            align-items: flex-start;
            cursor: pointer;
            transition: background 0.2s;
        }

        .action-entry:hover {
            background: #f8fafc;
        }

        .action-icon {
            width: 24px;
            height: 24px;
            background: #f1f5f9;
            border-radius: 4px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 14px;
            flex-shrink: 0;
        }

        .action-details {
            flex: 1;
            min-width: 0;
        }

        .action-title {
            font-weight: 500;
            margin-bottom: 4px;
            color: var(--text);
        }

        .action-meta {
            font-size: 12px;
            color: var(--text-secondary);
            font-family: var(--font-mono);
            margin-bottom: 4px;
        }

        .action-expanded {
            margin-top: 8px;
            padding: 12px;
            background: #f8fafc;
            border-radius: 4px;
            border: 1px solid var(--border);
            display: none;
        }

        .action-entry.expanded .action-expanded {
            display: block;
        }

        .action-section {
            margin-bottom: 12px;
        }

        .action-section:last-child {
            margin-bottom: 0;
        }

        .action-section-title {
            font-size: 11px;
            font-weight: 600;
            color: var(--text-secondary);
            text-transform: uppercase;
            margin-bottom: 6px;
            letter-spacing: 0.5px;
        }

        .action-code {
            background: white;
            padding: 8px;
            border-radius: 4px;
            font-family: var(--font-mono);
            font-size: 11px;
            overflow-x: auto;
            border: 1px solid var(--border);
            white-space: pre-wrap;
            word-break: break-all;
        }

        .action-grid {
            display: grid;
            grid-template-columns: 120px 1fr;
            gap: 6px;
            font-size: 11px;
        }

        .action-grid-label {
            color: var(--text-secondary);
            font-weight: 500;
        }

        .action-grid-value {
            font-family: var(--font-mono);
            word-break: break-all;
        }

        .expand-indicator {
            color: var(--text-secondary);
            font-size: 10px;
            margin-left: 8px;
        }

        /* Empty State */
        .empty-state {
            padding: 40px;
            text-align: center;
            color: var(--text-secondary);
        }

        /* Header Branding */
        .header-bar {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            background: rgba(0, 0, 0, 0.7);
            backdrop-filter: blur(8px);
            -webkit-backdrop-filter: blur(8px);
            padding: 12px 20px;
            display: flex;
            align-items: center;
            gap: 12px;
            z-index: 10;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .logo-icon {
            width: 32px;
            height: 32px;
            border-radius: 6px;
        }

        .brand-title {
            color: white;
            font-size: 18px;
            font-weight: 600;
            margin: 0;
            letter-spacing: 0.5px;
        }

        .brand-subtitle {
            color: rgba(255, 255, 255, 0.7);
            font-size: 12px;
            margin-left: auto;
        }
    </style>
</head>

<body>
    <div class="container">
        <div class="video-section">
            <div class="header-bar">
                <img src="data:image/png;base64,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"
                    alt="Dragon" class="logo-icon">
                <h1 class="brand-title">DRAGON Bug Report</h1>
                <!-- <span class="brand-subtitle">Bug Report</span> -->
            </div>
            <video controls src="{{VIDEO_BASE64}}"></video>
            <button id="toggle-sidebar" class="toggle-btn" title="Toggle Sidebar">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                    stroke-linecap="round" stroke-linejoin="round">
                    <path d="M9 18l6-6-6-6" />
                </svg>
            </button>
        </div>
        <div class="resizer" id="dragMe"></div>
        <div class="logs-section">
            <div class="tabs">
                <button class="tab-btn active" onclick="switchTab('info')">Info</button>
                <button class="tab-btn" onclick="switchTab('console')">Console</button>
                <button class="tab-btn" onclick="switchTab('network')">Network</button>
                <button class="tab-btn" onclick="switchTab('actions')">Actions</button>
            </div>

            <div id="info" class="tab-content active">
                <div id="info-content"></div>
            </div>

            <div id="console" class="tab-content">
                <div id="console-content"></div>
            </div>

            <div id="network" class="tab-content">
                <div class="network-toolbar">
                    <input type="text" class="search-input" placeholder="Filter..." id="network-search"
                        onkeyup="filterNetwork()">
                    <div class="filter-group" id="network-filters">
                        <button class="filter-btn active" onclick="setNetworkFilter('all')">All</button>
                        <button class="filter-btn" onclick="setNetworkFilter('xhr')">Fetch/XHR</button>
                        <button class="filter-btn" onclick="setNetworkFilter('doc')">Doc</button>
                        <button class="filter-btn" onclick="setNetworkFilter('css')">CSS</button>
                        <button class="filter-btn" onclick="setNetworkFilter('js')">JS</button>
                        <button class="filter-btn" onclick="setNetworkFilter('font')">Font</button>
                        <button class="filter-btn" onclick="setNetworkFilter('image')">Img</button>
                        <button class="filter-btn" onclick="setNetworkFilter('media')">Media</button>
                        <button class="filter-btn" onclick="setNetworkFilter('manifest')">Manifest</button>
                        <button class="filter-btn" onclick="setNetworkFilter('ws')">Socket</button>
                        <button class="filter-btn" onclick="setNetworkFilter('wasm')">Wasm</button>
                        <button class="filter-btn" onclick="setNetworkFilter('other')">Other</button>
                    </div>
                </div>
                <div class="table-container">
                    <table class="network-table">
                        <thead>
                            <tr>
                                <th style="width: 60px">Method</th>
                                <th>Name</th>
                                <th style="width: 50px">Status</th>
                                <th style="width: 60px">Type</th>
                                <th style="width: 60px">Size</th>
                                <th style="width: 60px">Time</th>
                                <th style="width: 50px">View</th>
                            </tr>
                        </thead>
                        <tbody id="network-content"></tbody>
                    </table>
                </div>
            </div>

            <div id="actions" class="tab-content">
                <div id="actions-content"></div>
            </div>
        </div>
    </div>

    <!-- Details Modal -->
    <div id="details-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 style="margin:0">Request Details</h3>
                <button class="close-modal" onclick="closeModal()">&times;</button>
            </div>
            <div class="modal-body" id="modal-body"></div>
        </div>
    </div>

    <script>
        const logs = {{ LOGS_DATA }};
        let currentFilter = 'all';

        // Resizer Logic
        const resizer = document.getElementById('dragMe');
        const leftSide = resizer.previousElementSibling;
        const rightSide = resizer.nextElementSibling;
        const container = resizer.parentNode;

        let x = 0;
        let leftWidth = 0;

        const mouseDownHandler = function (e) {
            x = e.clientX;
            leftWidth = leftSide.getBoundingClientRect().width;

            document.addEventListener('mousemove', mouseMoveHandler);
            document.addEventListener('mouseup', mouseUpHandler);
            resizer.classList.add('resizing');
            // Prevent iframe/video interference
            document.body.style.userSelect = 'none';
            document.body.style.pointerEvents = 'none';
        };

        const mouseMoveHandler = function (e) {
            const dx = e.clientX - x;
            const newLeftWidth = leftWidth + dx;

            // Min/Max constraints
            if (newLeftWidth < 200 || newLeftWidth > container.getBoundingClientRect().width - 300) return;

            leftSide.style.flex = `0 0 ${newLeftWidth}px`;
            rightSide.style.width = `calc(100% - ${newLeftWidth}px - 4px)`; // 4px is resizer width
        };

        const mouseUpHandler = function () {
            document.removeEventListener('mousemove', mouseMoveHandler);
            document.removeEventListener('mouseup', mouseUpHandler);
            resizer.classList.remove('resizing');
            document.body.style.removeProperty('user-select');
            document.body.style.removeProperty('pointer-events');
        };

        resizer.addEventListener('mousedown', mouseDownHandler);

        // Toggle Sidebar Logic
        const toggleBtn = document.getElementById('toggle-sidebar');
        toggleBtn.addEventListener('click', () => {
            // Add animating class for smooth transition
            const videoSection = document.querySelector('.video-section');
            videoSection.classList.add('animating');

            container.classList.toggle('collapsed');
            const isCollapsed = container.classList.contains('collapsed');

            // Update icon
            toggleBtn.innerHTML = isCollapsed
                ? '<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 18l-6-6 6-6"/></svg>'
                : '<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M9 18l6-6-6-6"/></svg>';

            // Update title
            toggleBtn.title = isCollapsed ? 'Show Sidebar' : 'Hide Sidebar';

            // Remove animating class after transition to prevent resizing lag
            setTimeout(() => {
                videoSection.classList.remove('animating');
            }, 300);
        });

        function switchTab(tabId) {
            document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
            document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));

            const btn = document.querySelector(`button[onclick="switchTab('${tabId}')"]`);
            if (btn) btn.classList.add('active');
            document.getElementById(tabId).classList.add('active');
        }

        function formatTime(timestamp) {
            if (!timestamp) return '00:00';
            const date = new Date(timestamp);
            return date.toLocaleTimeString().split(' ')[0];
        }

        function renderInfo() {
            const env = logs.environment || {};
            const appDetails = env.applicationDetails || {};

            let html = '';

            // Environment Info Section
            html += '<div style="border-bottom: 2px solid var(--border); padding: 20px;">';
            html += '<h3 style="margin: 0 0 16px 0; color: var(--primary); font-size: 16px; font-weight: 600;">Environment Info</h3>';
            html += '<table style="width: 100%; border-collapse: collapse; font-size: 14px;">';
            html += '<thead><tr style="background: #f1f5f9;"><th style="text-align: left; padding: 8px; border: 1px solid var(--border); font-weight: 600;">Property</th><th style="text-align: left; padding: 8px; border: 1px solid var(--border); font-weight: 600;">Value</th></tr></thead>';
            html += '<tbody>';

            // Display basic environment info
            const envFields = ['url', 'title', 'userAgent', 'platform', 'language'];
            envFields.forEach(key => {
                if (env[key]) {
                    html += `
                        <tr>
                            <td style="padding: 8px; border: 1px solid var(--border); color: var(--text-secondary); font-weight: 500;">${key.charAt(0).toUpperCase() + key.slice(1)}</td>
                            <td style="padding: 8px; border: 1px solid var(--border); font-family: var(--font-mono); word-break: break-all;">${escapeHtml(env[key])}</td>
                        </tr>
                    `;
                }
            });

            // Display viewport
            if (env.viewport) {
                html += `
                    <tr>
                        <td style="padding: 8px; border: 1px solid var(--border); color: var(--text-secondary); font-weight: 500;">Viewport</td>
                        <td style="padding: 8px; border: 1px solid var(--border); font-family: var(--font-mono);">${env.viewport.width} × ${env.viewport.height}</td>
                    </tr>
                `;
            }

            // Display screen
            if (env.screen) {
                html += `
                    <tr>
                        <td style="padding: 8px; border: 1px solid var(--border); color: var(--text-secondary); font-weight: 500;">Screen</td>
                        <td style="padding: 8px; border: 1px solid var(--border); font-family: var(--font-mono);">${env.screen.width} × ${env.screen.height}</td>
                    </tr>
                `;
            }

            html += '</tbody></table></div>';

            // Application Details Section
            if (Object.keys(appDetails).length > 0) {
                html += '<div style="padding: 20px;">';
                html += '<h3 style="margin: 0 0 16px 0; color: var(--primary); font-size: 16px; font-weight: 600;">Application Details</h3>';
                html += '<table style="width: 100%; border-collapse: collapse; font-size: 14px;">';
                html += '<thead><tr style="background: #f1f5f9;"><th style="text-align: left; padding: 8px; border: 1px solid var(--border); font-weight: 600;">Property</th><th style="text-align: left; padding: 8px; border: 1px solid var(--border); font-weight: 600;">Value</th></tr></thead>';
                html += '<tbody>';

                // Display static version
                if (appDetails.static) {
                    html += `
                        <tr>
                            <td style="padding: 8px; border: 1px solid var(--border); color: var(--text-secondary); font-weight: 500;">Static</td>
                            <td style="padding: 8px; border: 1px solid var(--border); font-family: var(--font-mono);">${escapeHtml(appDetails.static)}</td>
                        </tr>
                    `;
                }

                // Display ZUID
                if (appDetails.zuid) {
                    html += `
                        <tr>
                            <td style="padding: 8px; border: 1px solid var(--border); color: var(--text-secondary); font-weight: 500;">ZUID</td>
                            <td style="padding: 8px; border: 1px solid var(--border); font-family: var(--font-mono);">${escapeHtml(appDetails.zuid)}</td>
                        </tr>
                    `;
                }

                // Display ZSOID
                if (appDetails.zsoid) {
                    const zsoidDisplay = appDetails.portalName
                        ? `${appDetails.zsoid} (${appDetails.portalName})`
                        : appDetails.zsoid;
                    html += `
                        <tr>
                            <td style="padding: 8px; border: 1px solid var(--border); color: var(--text-secondary); font-weight: 500;">ZSOID</td>
                            <td style="padding: 8px; border: 1px solid var(--border); font-family: var(--font-mono);">${escapeHtml(zsoidDisplay)}</td>
                        </tr>
                    `;
                }

                // Display ERECNO
                if (appDetails.erecno) {
                    html += `
                        <tr>
                            <td style="padding: 8px; border: 1px solid var(--border); color: var(--text-secondary); font-weight: 500;">ERECNO</td>
                            <td style="padding: 8px; border: 1px solid var(--border); font-family: var(--font-mono);">${escapeHtml(appDetails.erecno)}</td>
                        </tr>
                    `;
                }

                // Display i18n
                if (appDetails.i18n) {
                    html += `
                        <tr>
                            <td style="padding: 8px; border: 1px solid var(--border); color: var(--text-secondary); font-weight: 500;">I18n</td>
                            <td style="padding: 8px; border: 1px solid var(--border); font-family: var(--font-mono);">${escapeHtml(appDetails.i18n)}</td>
                        </tr>
                    `;
                }

                // Display employee details
                if (appDetails.employee) {
                    const emp = appDetails.employee;

                    if (emp.empId) {
                        const empIdDisplay = emp.erecno ? `${emp.empId} (${emp.erecno})` : emp.empId;
                        html += `
                            <tr>
                                <td style="padding: 8px; border: 1px solid var(--border); color: var(--text-secondary); font-weight: 500;">EmpID</td>
                                <td style="padding: 8px; border: 1px solid var(--border); font-family: var(--font-mono);">${escapeHtml(empIdDisplay)}</td>
                            </tr>
                        `;
                    }

                    if (emp.fullName) {
                        html += `
                            <tr>
                                <td style="padding: 8px; border: 1px solid var(--border); color: var(--text-secondary); font-weight: 500;">FullName</td>
                                <td style="padding: 8px; border: 1px solid var(--border); font-family: var(--font-mono);">${escapeHtml(emp.fullName)}</td>
                            </tr>
                        `;
                    }

                    if (emp.firstName) {
                        html += `
                            <tr>
                                <td style="padding: 8px; border: 1px solid var(--border); color: var(--text-secondary); font-weight: 500;">FirstName</td>
                                <td style="padding: 8px; border: 1px solid var(--border); font-family: var(--font-mono);">${escapeHtml(emp.firstName)}</td>
                            </tr>
                        `;
                    }

                    if (emp.lastName) {
                        html += `
                            <tr>
                                <td style="padding: 8px; border: 1px solid var(--border); color: var(--text-secondary); font-weight: 500;">LastName</td>
                                <td style="padding: 8px; border: 1px solid var(--border); font-family: var(--font-mono);">${escapeHtml(emp.lastName)}</td>
                            </tr>
                        `;
                    }

                    if (emp.email) {
                        html += `
                            <tr>
                                <td style="padding: 8px; border: 1px solid var(--border); color: var(--text-secondary); font-weight: 500;">Email</td>
                                <td style="padding: 8px; border: 1px solid var(--border); font-family: var(--font-mono);">${escapeHtml(emp.email)}</td>
                            </tr>
                        `;
                    }

                    if (emp.dateOfJoining) {
                        html += `
                            <tr>
                                <td style="padding: 8px; border: 1px solid var(--border); color: var(--text-secondary); font-weight: 500;">DateOfJoining</td>
                                <td style="padding: 8px; border: 1px solid var(--border); font-family: var(--font-mono);">${escapeHtml(emp.dateOfJoining)}</td>
                            </tr>
                        `;
                    }

                    if (emp.designation) {
                        const designationDisplay = emp.designationId
                            ? `${emp.designation} (${emp.designationId})`
                            : emp.designation;
                        html += `
                            <tr>
                                <td style="padding: 8px; border: 1px solid var(--border); color: var(--text-secondary); font-weight: 500;">Designation</td>
                                <td style="padding: 8px; border: 1px solid var(--border); font-family: var(--font-mono);">${escapeHtml(designationDisplay)}</td>
                            </tr>
                        `;
                    }

                    if (emp.department) {
                        const departmentDisplay = emp.departmentId
                            ? `${emp.department} (${emp.departmentId})`
                            : emp.department;
                        html += `
                            <tr>
                                <td style="padding: 8px; border: 1px solid var(--border); color: var(--text-secondary); font-weight: 500;">Department</td>
                                <td style="padding: 8px; border: 1px solid var(--border); font-family: var(--font-mono);">${escapeHtml(departmentDisplay)}</td>
                            </tr>
                        `;
                    }

                    if (emp.location) {
                        const locationDisplay = emp.locationId
                            ? `${emp.location} (${emp.locationId})`
                            : emp.location;
                        html += `
                            <tr>
                                <td style="padding: 8px; border: 1px solid var(--border); color: var(--text-secondary); font-weight: 500;">Location</td>
                                <td style="padding: 8px; border: 1px solid var(--border); font-family: var(--font-mono);">${escapeHtml(locationDisplay)}</td>
                            </tr>
                        `;
                    }

                    if (emp.role) {
                        const roleDisplay = emp.roleId
                            ? `${emp.role} (${emp.roleId})`
                            : emp.role;
                        html += `
                            <tr>
                                <td style="padding: 8px; border: 1px solid var(--border); color: var(--text-secondary); font-weight: 500;">Role</td>
                                <td style="padding: 8px; border: 1px solid var(--border); font-family: var(--font-mono);">${escapeHtml(roleDisplay)}</td>
                            </tr>
                        `;
                    }
                }

                html += '</tbody></table></div>';
            }

            document.getElementById('info-content').innerHTML = html || '<div class="empty-state">No info available</div>';
        }

        function renderConsole() {
            const items = logs.console || [];
            const html = items.map(log => `
                <div class="log-entry">
                    <div class="log-time">${formatTime(log.timestamp)}</div>
                    <div class="log-type ${log.level}">${log.level}</div>
                    <div class="log-message">${escapeHtml(log.text)}</div>
                </div>
            `).join('');
            document.getElementById('console-content').innerHTML = html || '<div class="empty-state">No console logs</div>';
        }

        function renderNetwork() {
            const items = logs.network || [];
            const searchTerm = document.getElementById('network-search').value.toLowerCase();

            const filtered = items.filter(req => {
                // Type Filter - normalize to lowercase for comparison
                const reqType = (req.type || '').toLowerCase();

                if (currentFilter !== 'all') {
                    if (currentFilter === 'xhr' && !['fetch', 'xhr'].includes(reqType)) return false;
                    if (currentFilter === 'js' && reqType !== 'script') return false;
                    if (currentFilter === 'css' && reqType !== 'stylesheet') return false;
                    if (currentFilter === 'image' && reqType !== 'image') return false;
                    if (currentFilter === 'media' && reqType !== 'media') return false;
                    if (currentFilter === 'font' && reqType !== 'font') return false;
                    if (currentFilter === 'doc' && reqType !== 'document') return false;
                    if (currentFilter === 'ws' && reqType !== 'websocket') return false;
                    if (currentFilter === 'wasm' && reqType !== 'wasm') return false;
                    if (currentFilter === 'manifest' && reqType !== 'manifest') return false;
                    if (currentFilter === 'other' && ['fetch', 'xhr', 'script', 'stylesheet', 'image', 'media', 'font', 'document', 'websocket', 'wasm', 'manifest'].includes(reqType)) return false;
                }

                // Search Filter
                if (searchTerm) {
                    return req.url.toLowerCase().includes(searchTerm) ||
                        req.method.toLowerCase().includes(searchTerm);
                }
                return true;
            });

            const html = filtered.map((req) => {
                const urlParts = req.url.split('/');
                const fileName = urlParts[urlParts.length - 1].split('?')[0] || req.url;
                const statusClass = req.status >= 400 ? 'status-4xx' : (req.status >= 300 ? 'status-3xx' : 'status-2xx');

                // Get content-length from headers
                let contentLength = '-';
                if (req.responseHeaders && Array.isArray(req.responseHeaders)) {
                    const header = req.responseHeaders.find(h => h.name && h.name.toLowerCase() === 'content-length');
                    contentLength = formatSize(header?.value);
                }

                // Use the original index from items array, not filtered array
                const originalIndex = items.indexOf(req);

                return `
                <tr>
                    <td><span class="method-badge">${req.method}</span></td>
                    <td title="${req.url}">${escapeHtml(fileName)}</td>
                    <td><span class="status-badge ${statusClass}">${req.status || '---'}</span></td>
                    <td>${req.type}</td>
                    <td>${contentLength}</td>
                    <td>${req.time ? Math.round(req.time) + 'ms' : ''}</td>
                    <td><button class="view-btn" onclick="showDetails(${originalIndex})">View</button></td>
                </tr>
            `}).join('');

            document.getElementById('network-content').innerHTML = html || '<tr><td colspan="7" class="empty-state">No matching requests</td></tr>';
        }

        function setNetworkFilter(filter) {
            currentFilter = filter;
            document.querySelectorAll('.filter-btn').forEach(btn => btn.classList.remove('active'));

            const btn = document.querySelector(`button[onclick="setNetworkFilter('${filter}')"]`);
            if (btn) btn.classList.add('active');
            renderNetwork();
        }

        function filterNetwork() {
            renderNetwork();
        }

        function showDetails(index) {
            const req = logs.network[index];
            const modal = document.getElementById('details-modal');
            const body = document.getElementById('modal-body');

            body.innerHTML = `
                <div class="detail-section">
                    <h4>General</h4>
                    <div class="info-grid" style="padding:0; grid-template-columns: 100px 1fr;">
                        <div class="info-label">URL</div><div class="info-value">${escapeHtml(req.url)}</div>
                        <div class="info-label">Method</div><div class="info-value">${req.method}</div>
                        <div class="info-label">Status</div><div class="info-value">${req.status}</div>
                        <div class="info-label">Type</div><div class="info-value">${req.type}</div>
                        <div class="info-label">Time</div><div class="info-value">${req.time ? Math.round(req.time) + 'ms' : '-'}</div>
                        <div class="info-label">Timestamp</div><div class="info-value">${new Date(req.timestamp).toLocaleString()}</div>
                    </div>
                </div>

                <div class="detail-section">
                    <h4>Request Headers</h4>
                    <pre class="detail-pre">${JSON.stringify(req.requestHeaders || {}, null, 2)}</pre>
                </div>

                <div class="detail-section">
                    <h4>Request Payload</h4>
                    <pre class="detail-pre">${escapeHtml(req.requestBody || 'No payload')}</pre>
                </div>

                <div class="detail-section">
                    <h4>Response Headers</h4>
                    <pre class="detail-pre">${JSON.stringify(req.responseHeaders || {}, null, 2)}</pre>
                </div>

                <div class="detail-section">
                    <h4>Response Body</h4>
                    <pre class="detail-pre">${formatResponse(req.response)}</pre>
                </div>
        `;

            modal.style.display = 'block';
        }

        function formatResponse(response) {
            if (!response) return 'No response';

            try {
                if (typeof response === 'string') {
                    // Check if it looks like JSON
                    if (response.trim().startsWith('{') || response.trim().startsWith('[')) {
                        const parsed = JSON.parse(response);
                        return escapeHtml(JSON.stringify(parsed, null, 2));
                    }
                }
                return escapeHtml(typeof response === 'object' ? JSON.stringify(response, null, 2) : response);
            } catch (e) {
                return escapeHtml(response);
            }
        }

        function closeModal() {
            document.getElementById('details-modal').style.display = 'none';
        }

        // Close modal on outside click
        window.onclick = function (event) {
            const modal = document.getElementById('details-modal');
            if (event.target == modal) {
                modal.style.display = "none";
            }
        }

        function formatSize(bytes) {
            if (!bytes) return '-';
            bytes = parseInt(bytes);
            if (isNaN(bytes)) return '-';
            if (bytes < 1024) return bytes + ' B';
            if (bytes < 1024 * 1024) return (bytes / 1024).toFixed(1) + ' KB';
            return (bytes / (1024 * 1024)).toFixed(1) + ' MB';
        }

        function renderActions() {
            const items = logs.actions || [];
            const html = items.map((action, index) => {
                const elementName = action.elementName || action.tagName || 'Unknown';
                const details = action.elementDetails || {};

                // Format the value display
                let valueDisplay = '';
                if (action.value) {
                    valueDisplay = `<span style="color: #6366f1; font-weight: 500;"> → "${escapeHtml(action.value)}"</span>`;
                }

                return `
                <div class="action-entry" ${action.type !== 'navigation' ? `onclick="toggleActionDetails(${index})"` : ''}>
                    <div class="action-icon">${getActionIcon(action.type)}</div>
                    <div class="action-details">
                        <div class="action-title">
                            ${formatActionTitle(action)} 
                            ${action.type !== 'navigation' ? `<strong>"${escapeHtml(elementName)}"</strong>${valueDisplay}` : ''}
                            ${action.type !== 'navigation' ? '<span class="expand-indicator">▼</span>' : ''}
                        </div>
                        ${action.type !== 'navigation' ? `
                        <div class="action-meta">${escapeHtml(action.selector || action.tagName || '')}</div>
                        <div class="action-expanded">
                            ${action.value ? `
                                <div class="action-section">
                                    <div class="action-section-title">Value</div>
                                    <div class="action-code" style="background: #f0f9ff; border-color: #6366f1;">${escapeHtml(action.value)}</div>
                                </div>
                            ` : ''}
                            
                            ${details.outerHTML ? `
                                <div class="action-section">
                                    <div class="action-section-title">Element HTML</div>
                                    <div class="action-code">${escapeHtml(details.outerHTML)}</div>
                                </div>
                            ` : ''}
                            
                            ${details.attributes && Object.keys(details.attributes).length > 0 ? `
                                <div class="action-section">
                                    <div class="action-section-title">Attributes</div>
                                    <div class="action-grid">
                                        ${Object.entries(details.attributes).map(([key, value]) => `
                                            <div class="action-grid-label">${escapeHtml(key)}</div>
                                            <div class="action-grid-value">${escapeHtml(value)}</div>
                                        `).join('')}
                                    </div>
                                </div>
                            ` : ''}
                            
                            ${details.position && Object.keys(details.position).length > 0 ? `
                                <div class="action-section">
                                    <div class="action-section-title">Position & Size</div>
                                    <div class="action-grid">
                                        ${Object.entries(details.position).map(([key, value]) => `
                                            <div class="action-grid-label">${key}</div>
                                            <div class="action-grid-value">${value}px</div>
                                        `).join('')}
                                    </div>
                                </div>
                            ` : ''}
                            
                            ${details.computed && Object.keys(details.computed).length > 0 ? `
                                <div class="action-section">
                                    <div class="action-section-title">Computed Styles</div>
                                    <div class="action-grid">
                                        ${Object.entries(details.computed).map(([key, value]) => `
                                            <div class="action-grid-label">${key}</div>
                                            <div class="action-grid-value">${escapeHtml(value)}</div>
                                        `).join('')}
                                    </div>
                                </div>
                            ` : ''}
                        </div>
                        ` : ''}
                    </div>
                    <div class="log-time">${formatTime(action.timestamp)}</div>
                </div>
            `}).join('');
            document.getElementById('actions-content').innerHTML = html || '<div class="empty-state">No actions recorded</div>';
        }

        function toggleActionDetails(index) {
            const entries = document.querySelectorAll('.action-entry');
            if (entries[index]) {
                entries[index].classList.toggle('expanded');
            }
        }

        function getActionIcon(type) {
            const icons = {
                'click': '🖱️',
                'typing': '⌨️',
                'input': '✏️',
                'navigation': '🧭'
            };
            return icons[type] || '•';
        }

        function formatActionTitle(action) {
            if (action.type === 'click') return `Clicked`;
            if (action.type === 'typing') return `Typing in`;
            if (action.type === 'input') return `Entered value in`;
            if (action.type === 'navigation') return `Navigated to ${action.url}`;
            return action.type;
        }

        function escapeHtml(unsafe) {
            if (!unsafe) return '';
            return unsafe
                .replace(/&/g, "&amp;")
                .replace(/</g, "&lt;")
                .replace(/>/g, "&gt;")
                .replace(/"/g, "&quot;")
                .replace(/'/g, "&#039;");
        }

        // Initialize
        renderInfo();
        renderConsole();
        renderNetwork();
        renderActions();
    </script>
</body>

</html>